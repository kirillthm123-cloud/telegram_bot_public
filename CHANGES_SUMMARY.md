# üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π v5.0

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. YooKassa –æ–ø–ª–∞—Ç–∞ —Ç–µ–ø–µ—Ä—å –ü–û–õ–ù–û–°–¢–¨–Æ –†–ê–ë–û–¢–ê–ï–¢ ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å —Ç–∞—Ä–∏—Ñ" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞, –Ω–µ –±—ã–ª–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å API

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `YooKassaPayment` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `create_payment()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `check_payment()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã callback'–∏ `pay_month` –∏ `pay_year` –¥–ª—è –æ–ø–ª–∞—Ç—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω callback `check_payment` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–û–ø–ª–∞—Ç–∏—Ç—å 1 –º–µ—Å—è—Ü" –∏–ª–∏ "–û–ø–ª–∞—Ç–∏—Ç—å 1 –≥–æ–¥"
2. –ë–æ—Ç —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç—ë–∂ —á–µ—Ä–µ–∑ YooKassa API
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç URL –¥–ª—è –æ–ø–ª–∞—Ç—ã
4. –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –Ω–∞–∂–∏–º–∞–µ—Ç "–Ø –æ–ø–ª–∞—Ç–∏–ª"
5. –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂–∞
6. –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç PRO –ø–æ–¥–ø–∏—Å–∫—É

### 2. AI-–ø—Å–∏—Ö–æ–ª–æ–≥ —Ç–µ–ø–µ—Ä—å –ü–û–ú–ù–ò–¢ –¥–∏–∞–ª–æ–≥–∏ ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ—Å—å –∫–∞–∫ –Ω–æ–≤–æ–µ, –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–µ—Ä—è–ª—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `conversation_history` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–µ—Ç–æ–¥ `add_message_to_history()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ú–µ—Ç–æ–¥ `get_conversation_history()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 10 —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ú–µ—Ç–æ–¥ `clear_conversation_history()` - –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ –ú–µ—Ç–æ–¥ `trim_conversation_history()` - –∞–≤—Ç–æ–ø–æ–¥—Ä–µ–∑–∫–∞ –¥–æ 15 —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `ask_deepseek_ai()` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é AI" –≤ –º–µ–Ω—é

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –∫ AI —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è user –∏ assistant —Å–æ–æ–±—â–µ–Ω–∏—è
2. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
3. –í–µ—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ DeepSeek API
4. AI –≤–∏–¥–∏—Ç –∏—Å—Ç–æ—Ä–∏—é –∏ –æ—Ç–≤–µ—á–∞–µ—Ç —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
5. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ä–µ–∑–∞–µ—Ç—Å—è –¥–æ 15 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** `AttributeError: 'NoneType' has no attribute 'run_daily'`

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –ø–æ–¥ python-telegram-bot v21+
- ‚úÖ –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç–µ–ø–µ—Ä—å async/await
- ‚úÖ JobQueue –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ `post_init()`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã: `filters`, `ContextTypes.DEFAULT_TYPE`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `zoneinfo` –≤–º–µ—Å—Ç–æ `pytz`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Application —Å `.post_init(post_init)`

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```python
# –°—Ç–∞—Ä—ã–π –∫–æ–¥ (–ù–ï –†–ê–ë–û–¢–ê–õ):
application = Application.builder().token(BOT_TOKEN).build()
job_queue = application.job_queue  # <- job_queue == None!
job_queue.run_daily(...)  # <- –û–®–ò–ë–ö–ê!

# –ù–æ–≤—ã–π –∫–æ–¥ (–†–ê–ë–û–¢–ê–ï–¢):
async def post_init(application: Application):
    jq = application.job_queue  # <- job_queue –≥–æ—Ç–æ–≤
    jq.run_daily(...)

application = (
    Application.builder()
    .token(BOT_TOKEN)
    .post_init(post_init)  # <- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    .build()
)
```

---

## üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `conversation_history`
- –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ `user_id`
- –°—Ö–µ–º–∞ –≤ —Ñ–∞–π–ª–µ `database_schema.sql`

### –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å—Ç–∞—Ç—É—Å–æ–≤: `succeeded`, `pending`, `waiting_for_capture`, `cancelled`
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞" –¥–ª—è –æ–∂–∏–¥–∞—é—â–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –£–ª—É—á—à–µ–Ω AI-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- –ü–∞—Ä–∞–º–µ—Ç—Ä `use_history` –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
- –†–∞–∑–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, —Ç–µ—Å—Ç—ã) –ë–ï–ó –∏—Å—Ç–æ—Ä–∏–∏
- –î–∏–∞–ª–æ–≥–∏ —Å AI-–ø—Å–∏—Ö–æ–ª–æ–≥–æ–º –° –∏—Å—Ç–æ—Ä–∏–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ Markdown –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

### –ö–æ–¥ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é async
- –í—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã: `async def handler(update, context)`
- –í—Å–µ –≤—ã–∑–æ–≤—ã API: `await update.message.reply_text()`
- –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è —Ä–∞–±–æ—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üì¶ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

1. **bot.py** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω (2000+ —Å—Ç—Ä–æ–∫)
2. **requirements.txt** - –æ–±–Ω–æ–≤–ª–µ–Ω –ø–æ–¥ PTB v21+
3. **.env.example** - —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. **DEPLOY_INSTRUCTIONS.md** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (50+ —Å—Ç—Ä–∞–Ω–∏—Ü)
5. **database_schema.sql** - —Å—Ö–µ–º–∞ –ë–î —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
6. **README.md** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
7. **CHANGES_SUMMARY.md** - —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```txt
python-telegram-bot>=21.4,<22.0
requests>=2.32.0,<3.0.0
python-dotenv>=1.0.0,<2.0.0
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Python 3.9+ (–¥–ª—è zoneinfo)
- SQLite 3.x
- Linux/Ubuntu (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã Database –∫–ª–∞—Å—Å–∞:
```python
db.add_message_to_history(user_id, role, content)
db.get_conversation_history(user_id, limit=10)
db.clear_conversation_history(user_id)
db.trim_conversation_history(user_id, keep_last=15)
```

### –ù–æ–≤—ã–π –∫–ª–∞—Å—Å YooKassaPayment:
```python
yukassa.create_payment(amount, description, user_id, return_url)
yukassa.check_payment(payment_id)
yukassa.verify_webhook_signature(body, signature, secret_key)
```

---

## üöÄ –ö–∞–∫ –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –±–æ—Ç

### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞—Ä—ã–π –±–æ—Ç
```bash
systemctl stop telegram_bot.service
```

### –®–∞–≥ 2: –°–¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ë–î
```bash
cp /root/telegram_bot/bot.db /root/telegram_bot/bot.db.backup
```

### –®–∞–≥ 3: –ó–∞–º–µ–Ω–∏—Ç–µ —Ñ–∞–π–ª—ã
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ `/home/ubuntu/telegram_bot_fixed/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
cd /root/telegram_bot
source venv/bin/activate
pip install -r requirements.txt --upgrade
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø–æ–ª–Ω–µ–Ω—ã

### –®–∞–≥ 6: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç
```bash
systemctl start telegram_bot.service
systemctl status telegram_bot.service
```

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
```bash
tail -f /root/telegram_bot/bot.log
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å "‚úÖ YooKassa –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞"
- [ ] –í –ª–æ–≥–∞—Ö –µ—Å—Ç—å "üìÖ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞"
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ /start
- [ ] –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å —Ç–∞—Ä–∏—Ñ" –≤–µ–¥—ë—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã
- [ ] –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
- [ ] AI –ø–æ–º–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –¥–∏–∞–ª–æ–≥–µ
- [ ] –ö–Ω–æ–ø–∫–∞ "–û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é AI" —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ 10:00 –ú–°–ö (–¥–ª—è PRO)

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **Webhook –æ—Ç YooKassa** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Ç–∞—Ç—É—Å–∞ –∫–Ω–æ–ø–∫–æ–π "–Ø –æ–ø–ª–∞—Ç–∏–ª". –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω—É–∂–µ–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä (Flask/FastAPI).

2. **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤** - —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 15 —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î–ª—è –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ —É–≤–µ–ª–∏—á—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `keep_last` –≤ –º–µ—Ç–æ–¥–µ `trim_conversation_history()`.

3. **–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å** - –∂—ë—Å—Ç–∫–æ –∑–∞–¥–∞–Ω `Europe/Moscow`. –î–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ—è—Å–æ–≤ –∏–∑–º–µ–Ω–∏—Ç–µ –≤ –∫–æ–¥–µ `TZ = ZoneInfo("Europe/Moscow")`.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: `tail -100 /root/telegram_bot/bot.log`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å**: `systemctl status telegram_bot.service`
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env**: –≤—Å–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã?
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î**: —Ç–∞–±–ª–∏—Ü–∞ `conversation_history` —Å–æ–∑–¥–∞–Ω–∞?

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å:
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ YooKassa
- ‚úÖ AI —Å –ø–∞–º—è—Ç—å—é –¥–∏–∞–ª–æ–≥–æ–≤
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞ (PTB v21+)
- ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! üöÄ**
